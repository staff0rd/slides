<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>React: Learning Hooks + Redux</title>
    <!-- Twitter cards -->
    <meta name="twitter:site" content="@staff0rd">
    <meta name="twitter:creator" content="@staff0rd">
    <meta name="og:title" content="React: Learning Hooks + Redux">
    <!-- page summary -->
    <meta name="og:description" content="Reducing complexity in React with Hooks. Adding it back by integrating Redux">
    <!-- page image -->
    <meta name="twitter:card"  content="summary_large_image">
    <meta name="og:image" content="https://staffordwilliams.com/talks/slides/react-hooks-and-redux/cover.jpg">

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
          <h1>React</h1>
					<h2>
						Learning Hooks + Redux
					</h2>
					<p>staffordwilliams.com</p>
					<p>@staff0rd</p>
				</section>
				<section>
					<ul>
						<li>
							How did I get here?
						</li>
						<li>
							Learning Hooks
						</li>
						<li>
							Learning Redux
						</li>
					</ul>
				</section>
				<section>
					<h2>How did I get here?</h2>
					<img class='fragment' src='img/netscape.gif' />
				</section>
				<section>
					<h2>2006</h2>
					<img class='fragment' src='img/jquery.jpg' />
				</section>
				<section>
					<h2>2007</h2>
					<img class='fragment' src='img/extjs.jpg' />
				</section>
				<section>
					<h2>2009</h2>
					<img class='fragment' style='background: white;' src='img/mvc.jpeg' />
				</section>
				<section>
					<h2>2010</h2>
					<img class='fragment' style='background: white;' src='img/angular.png' />
				</section>
				<section>
					<h2>2012</h2>
					<img class='fragment' style='background: white;' src='img/durandal.png' />
				</section>
				<section>
					<h2>2013</h2>
					<img class='fragment' style='background: white;' src='img/react.jpeg' />
				</section>
				<section>
					<h2>2015</h2>
					<img class='fragment' style='background: white;' src='img/redux.png' />
					<ul>
						<li class='fragment' >Quit my job</li class='fragment'>
						<li class='fragment' >Learnt AngularJS</li class='fragment'>
					</ul>
				</section>
				<section>
					<h2>2016</h2>
					<img class='fragment' style='background: white;' src='img/phaser.jpeg' />
				</section>
				<section>
					<img style='background: white;' src='img/pixijs.png' />
				</section>
				<!-- <section>
					<h2>2016</h2>
					<img src='img/angular2.jpg' />
				</section> -->
				<!-- <section>
					<h2>2017</h2>
					<ul>
						<li class='fragment' >Swift (?)</li class='fragment'>
						<li class='fragment' >ASP.NET MVC 4</li class='fragment'>
					</ul>
				</section> -->
				<section>
					<h2>2018</h2>
					<img style='background: white;' src='img/react.jpeg' />
				</section>
				<section>
					<h2>Components & Props</h2>
				</section>
				<section>
					<pre><code class="lang-javascript" data-trim data-noescape>
						function Welcome(props) {
						  return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;
						}
					</code></pre>
				</section>
				<section>
          <pre><code class="lang-javascript" data-trim data-noescape>
            function Welcome(props) {
              return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;
            }
            
            function App() {
              return (
                &lt;div&gt;
                  &lt;Welcome name=&quot;Sara&quot; /&gt;
                  &lt;Welcome name=&quot;Cahal&quot; /&gt;
                  &lt;Welcome name=&quot;Edite&quot; /&gt;
                &lt;/div&gt;
              );
            }
            </code></pre>
          </section>
          <section>
            <h2>State & Lifecycle</h2>
          </section>
          <section data-transition="slide-in none">
            <pre><code data-trim data-noescape>
              function Welcome(props) {
                return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape>
              class Welcome extends React.Component {
                render() {
                  return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="2-7,10">
              class Welcome extends React.Component {
                constructor(props) {
                  super(props);
                  this.state = {
                    name: "Meligy",
                  };
                }
              
                render() {
                  return &lt;h1&gt;Hello, {this.state.name}&lt;/h1&gt;;
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="9-10">
              class Welcome extends React.Component {
                constructor(props) {
                  super(props);
                  this.state = {
                    name: "Meligy",
                  };
                }

                componentDidMount() {}
                componentWillUnmount() {}
              
                render() {
                  return &lt;h1&gt;Hello, {this.state.name}&lt;/h1&gt;;
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="2-8">
              class Welcome extends React.Component {
                componentDidMount() {
                  something.subscribe("newPerson", (person) => {
                    this.setState({
                      name: person.name
                    });
                  });
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="9-13">
              class Welcome extends React.Component {
                componentDidMount() {
                  something.subscribe("newPerson", (person) => {
                    this.setState({
                      name: person.name
                    });
                  });
                }

                componentWillUnmount() {
                  something.unsubscribe("newPerson");
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape>
              class Welcome extends React.Component {
                constructor(props) { ... }

                componentDidMount() { ... }

                componentWillUnmount() { ... }

                render() { ... }
              }
            </code></pre>
          </section>
          <section>
            <h1>2019</h1>
            <h3 class="fragment">Hooks</h3>
            <ul>
              <li class="fragment">React 16.8</li>
              <li class="fragment">Opt-in, non-breaking</li>
              <li class="fragment">
                React Today and Tomorrow and 90% Cleaner React With Hooks
                <a href="https://youtu.be/dpw9EHDh2bM">
                  https://youtu.be/dpw9EHDh2bM
                </a>
              </li>
            </ul>
          </section>
          <section>
            <h3>Hooks</h3>
            <ul>
              <li>useState</li>
              <li>useEffect</li>
              <li class="fragment">Rules</li>
              <li class="fragment">Custom hooks</li>
            </ul>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape>
              class Welcome extends React.Component {
                constructor(props) {
                  super(props);
                  this.state = {
                    name: "Meligy",
                  };
                }
              
                render() {
                  return &lt;h1&gt;Hello, {this.state.name}&lt;/h1&gt;;
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape>
              function Welcome() {
                const [name, setName] = useState("Meligy");

                return &lt;h1&gt;Hello, {name}&lt;/h1&gt;;
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="3-13">
              class Welcome extends React.Component {
                ...
                componentDidMount() {
                  something.subscribe("newPerson", (person) => {
                    this.setState({
                      name: person.name
                    });
                  });
                }

                componentWillUnmount() {
                  something.unsubscribe("newPerson");
                }
                ...
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="4-9|5-7|8|9">
              function Welcome() {
                const [name, setName] = useState("Meligy");

                useEffect(() => {
                  something.subscribe("newPerson", (person) => {
                    setName(person.name);
                  });
                  return () => something.unsubscribe("newPerson");
                }, []);

                return &lt;h1&gt;Hello, {name}&lt;/h1&gt;;
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape>
              componentDidMount() {
                document.title = `You have ${this.state.beers} left`;
              }
            
              componentDidUpdate() {
                document.title = `You have ${this.state.beers} left`;
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="5-9">
              componentDidMount() {
                document.title = `You have ${this.state.beers} left`;
              }
            
              componentDidUpdate(prevProps, prevState) {
                // optimised!
                if (prevState.beers != this.state.beers) {
                  document.title = `You have ${this.state.beers} left`;
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape>
              useEffect(() => {
                document.title = `You have ${beers} left`;
              }, [beers]);
            </code></pre>
          </section>
          <section>
            <h2>Rules</h2>
            <ul class='fragment'>
              <li>
                <div>Only Call Hooks at the Top Level</div>
                <pre class='fragment'><code data-trim data-noescape data-line-numbers="1-4|5-8">
                  // NO!
                  if (condition) {
                    useEffect(() => { ... });
                  }
                  // YES!
                  useEffect(() => {
                    if (condition) { ... }
                  });
                </code></pre>
              </li>
              <li class='fragment'>Call Hooks from React function components</li>
              <li class='fragment'>Call Hooks from custom Hooks</li>
              <li class='fragment'>eslint-plugin-react-hooks</li>
            </ul>
          </section>
          <section>
            <h2>Custom hooks</h2>
            <img src='img/wrapperhell.jpeg' />
          </section>
          <section>
            <pre><code data-trim data-noescape data-line-numbers="|10-11|4|5">
              class ShowTheLocation extends React.Component {
                render() {
                  return (
                    &lt;Link onClick={() =&gt; this.props.history.push("/")}&gt;
                      You are now at {this.props.location.pathname}
                    &lt;/Link&gt;
                  );
                }
              } 
              const ShowTheLocationWithRouter =
                withRouter(ShowTheLocation);
            </code></pre>
          </section>
          <section>
            <pre><code data-trim data-noescape data-line-numbers="">
              function ShowTheLocation() {
                const history = useHistory();
                const location = useLocation();

                return (
                  &lt;Link onClick={() =&gt; history.push("/")}&gt;
                    You are now at {location.pathname}
                  &lt;/Link&gt;
                );                
              } 
            </code></pre>
          </section>
          <section>
            <h1>Also in 2019...</h1>
            <img class="fragment" style="background: white;" src="img/redux.png" />
          </section>
          <section>
            <h1>Redux 101</h1>
            <ul>
              <li class='fragment'>
                <div>Single source of truth</div>
                <div class='fragment'><em>Store</em></div>
              </li>
              <li class='fragment'>
                <div>State is read-only</div>
                <div class='fragment'>Trigger modification by dispatching <em>Action</em>s</div>
              </li>
              <li class='fragment'>
                <div>Change via pure function</div>
                <div class='fragment'><em>Reducer</em>s take current state and an action to produce new state</div>
              </li>
            </ul>
          </section>
          <section>
            <h1>Redux</h1>
            <ul>
              <li>Store</li>
              <li>Action</li>
              <li>Reducer</li>
            </ul>
          </section>
          <section data-transition="none none">
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="1-2|4|6-13">
              console.log(store.getState());
              // prints { beers: 10 }

              store.dispatch({ type: 'DRINK_BEER' });

              function reducer(state = { beers: 10 }, action) {
                switch(action.type) {
                  case 'DRINK_BEER': return ({
                    ...state,
                    beers: state.beers - 1,
                  });
                }
              };
            </code></pre>
          </section>
          <section>
            <h2 style='text-transform: none;'>
              npm install redux --save
            </h2>
          </section>
          <section>
            <ul>
              <li>redux</li>
              <li>react-redux</li>
              <li>@reduxjs/toolkit</li>
              <li>redux-devtools</li>
            </ul>
          </section>
          <section>
            <h1 style='text-transform: none;'>react-redux</h1>
            <ul>
              <li>Provider</li>
              <li>connect</li>
            </ul>
          </section>
          <section>
            <h2 style='text-transform: none;'>Provider</h2>
            <pre><code class="lang-javascript" data-trim data-noescape™>
              return (
                &lt;Provider store={store}&gt;
                  &lt;App /&gt;
                &lt;/Provider&gt;
              );
            </code></pre>
          </section>
          <section>
            <h2 style='text-transform: none;'>connect</h2>
            <pre><code class="lang-javascript" data-trim data-noescape data-line-numbers="|1-6|8-12|14-17">
              const mapStateToProps = (state) => {
                return {
                  beers: state.beers,
                  beersDrunk: 24 - state.beers,
                }
              }
              
              const mapDispatchToProps = dispatch => {
                return {
                  drinkBeer: () => dispatch({ type: 'DRINK_BEER' }),
                }
              }
              
              export default connect(
                mapStateToProps,
                mapDispatchToProps
              )(MyComponent)
            </code></pre>
          </section>
          <section data-transition="none none">
            <h2>Selectors</h2>
            <pre><code class="lang-javascript" data-trim data-noescape>
              const mapStateToProps = (state) => {
                return {
                  beers: state.beers,
                  beersDrunk: 24 - state.beers,
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <h2>Selectors</h2>
            <pre><code class="lang-javascript" data-trim data-noescape>
              const mapStateToProps = createSelector(
                beersSelector,
                beersDrunkSelector,
                (beers, beersDrunk) => ({
                  beers,
                  beersDrunk,
              });
            </code></pre>
          </section>
          <section data-transition="none none">
            <h2>Action creators</h2>
            <pre><code class="lang-javascript" data-trim data-noescape>
              const mapDispatchToProps = dispatch => {
                return {
                  drinkBeer: () => dispatch({ type: 'DRINK_BEER' }),
                }
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <h2>Action creators</h2>
            <pre><code class="lang-javascript" data-trim data-noescape>
              const {
                drinkBeer,
              } = createActions(
                'DRINK_BEER'
              );

              export default {
                drinkBeer,
              }
            </code></pre>
          </section>
          <section data-transition="none none">
            <h2>Action creators</h2>
            <pre><code class="lang-javascript" data-trim data-noescape>
              const mapDispatchToProps = dispatch => 
                bindActionCreators(actions, dispatch);
            </code></pre>
          </section>
          <section>
            <h2 style='text-transform: none;'>connect</h2>
            <pre><code class="lang-javascript" data-trim data-noescape>
              const mapStateToProps = createSelector(
                beersSelector,
                beersDrunkSelector,
                (beers, beersDrunk) => ({
                  beers,
                  beersDrunk,
              });
              
              const mapDispatchToProps = dispatch => 
                bindActionCreators({ actions }, dispatch);
              
              export default connect(
                mapStateToProps,
                mapDispatchToProps
              )(MyComponent)
            </code></pre>
          </section>
          <section>
            <h2 style='text-transform: none;'>Redux Toolkit</h2>
            <ul>
              <li class="fragment">configureStore
                <ul class="fragment">
                  <li>combineReducers, middleware</li>
                </ul>
              </li>
              <li class="fragment">createReducer
                <ul class="fragment">
                  <li>switch, immer</li>
                </ul>
              </li>
              <li class="fragment">createAction</li>
              <li class="fragment">createSelector</li>
              <li class="fragment">createSlice</li>
              <li class="fragment">createAsyncThunk</li>
              <li class="fragment">createEntityAdapter</li>
            </ul>
            <aside class="notes">
              <ul>
                <li>createSlice
                  <ul>
                    <li>
                      Generates action creators and action types
                    </li>
                  </ul>
                </li>
                <li>createAsyncThunk
                  <ul>
                    <li>
                      Cuts down on boiler plate for async actions
                    </li>
                  </ul>
                </li>
                <li>createEntityAdapter
                  <ul>
                    <li>
                      Port of ngrx/entity
                    </li>
                    <li>
                      Generates a set of prebuilt reducers and selectors for performing CRUD operations
                    </li>
                  </ul>
                </li>
              </ul>
            </aside>
          </section>
          <section>
            <h1>redux hooks</h1>
            <ul>
              <li>useSelector</li>
              <li>useDispatch</li>
            </ul>
          </section>
          <section>
            <pre><code class="lang-javascript" data-trim data-noescape>
              function MyComponent() {
                const beers = useSelector(state => state.beers);
                const dispatch = useDispatch();

                return (
                  &lt;Button onclick={() =&gt; dispatch(actions.drinkBeer())}&gt;
                    Drink one of the {beers} beers.
                  &lt;/Button&gt;
                );
              }
            </code></pre>
          </section>
          <section>
            <h2 style='text-transform: none;'>staffordwilliams.com</h2>
            <h2 style='text-transform: none;'>@staff0rd</h2>
          </section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				hash: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/highlight/highlight.js' },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		</script>
	</body>
</html>
